# Project localization

## Project localization structure

Directory `crates/i18n/assets` contains the locale subdirectories, each subdirectory representing one locale, for example `en-US` or `nl-NL`. In the locale subdirectory there is `main.ftl` file which contains all localization resources. Each localization entry is in the format `key = value`.
Keys are prefixed with the category, for example `error-connection-failed` or `label-username`.
Every file also contains the entries which represent the supported locales, which start with `lang-` prefix. For example: `language-english`, `language-german`, etc. The base file for translation is `en-US/main.ftl` which contains English strings.

## Translation tasks

There are three defined translation tasks. Before proceeding, ask what task to perform. Do one task at a time.

## Task 1: adding a new locale support

The new locale will be further referred as `$LOCALE`. Ask for the exact locale name if it is not provided when given this task. It must be in the correctform of `xx-YY`, for example `jp-JP`. If it's not given in the correct form, do not proceed.

Add a localization support for $LOCALE by doing the following:

* create `crates/i18n/assets/$LOCALE` directory.
* copy the base translation file `crates/i18n/assets/en-US/main.ftl` into this directory.
* translate ALL entries in the copied file to the target locale $LOCALE.
* add a `language-$LOCALE` to all existing translation files and to the newly created file. Translate that entry in the each of the files to the locale which this file represents.

## Task 2: adding missing translations from the base English file to all other locales

* Read all `main.ftl` files from all locale subdirectories.
* Use the `en-US/main.ftl` as a base file.
* For each of the locale files, add the missing entries from the base file and translate them to the target locale.

## Task 3: finding untranslated English strings in the code

* Read all Rust files recursively in the following subdirectories: `crates` and `apps`.
* Find the quoted strings which look like human-readable English sentences and which are not already localized via the use of `tr!` macro or `i18n::translate` calls.
* Create a new key for that string, in the form of `category-short-description`, based on the semantic meaning of the English text. Where category is for example `error`, `label`, `info`, etc.
* Replace the original string with the call to `tr!("key")` where key is the created key.
* Add the entry with the original string to the base translation file, to the appropriate group.
* Add the entry with the translated string to each of the other translation files.


## Important notes for all tasks

* Do not modify the existing entries.
* Keep the original file structure intact, grouped by the key type.
* When adding new entries, add them to the corresponding group with the same porefix.
* Keep the {$template} parameters enclosed in braces untranslated, for example `{$event}`
* Keep all the comments in the files
